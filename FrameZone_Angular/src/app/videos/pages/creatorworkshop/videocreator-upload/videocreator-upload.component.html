<div class="container py-5">

  <!-- 標題 -->
  <h2 class="mb-4 fw-bold">上傳影片</h2>

  <!-- 上傳區 -->
  <div class="card mb-4 border-2 border-dashed text-center" *ngIf="!uploadFinished">
    <div class="card-body py-5">
      <i class="ti ti-video-plus fs-1 text-primary mb-3"></i>
      <p class="fs-5 mb-2">拖放影片檔案到這裡，或</p>

      <button class="btn btn-primary mb-2" (click)="fileInput.click()">
        <i class="ti ti-upload me-1"></i> 選擇檔案
      </button>

      <input #fileInput type="file" class="d-none" accept="video/*" (change)="onFileSelected($event)">

      <div class="text-muted mt-3 small">
        支援格式：MP4、AVI、MOV（最大 500MB）
      </div>
    </div>
  </div>

  <!-- 上傳進度 -->
  <div class="card mb-4" *ngIf="uploading">
    <div class="card-body">
      <div class="progress mb-2">
        <div class="progress-bar progress-bar-striped progress-bar-animated" [style.width.%]="uploadProgress">
          {{ uploadProgress }}%
        </div>
      </div>
      <div class="text-muted small">
        {{ statusMessage }}
      </div>
    </div>
  </div>

  <!-- 上傳失敗警示 -->
  <div class="card-body">
    <div *ngIf="!uploading && uploadFail === true" class=" alert alert-danger mb-3 text-center" role="alert">
      {{statusMessage}}
    </div>
  </div>

  <!-- 影片詳細資訊（上傳完成後） -->
  <div class="card" *ngIf="uploadFinished">
    <div class="card-header fw-bold">
      影片詳細資訊
    </div>

    <div class="card-body">

      <!-- 預覽區 -->
      <div class="mb-4 text-center">
        <div class="text-muted">
          影片處理中，完成後可預覽
        </div>
      </div>

      <!-- 縮圖預覽 -->
      <div class="thumbnail-container mb-4">
        <h3>{{ statusMessage }}</h3>
        <div class="thumbnails-grid d-flex gap-2 flex-wrap">
          <div *ngFor="let thumb of thumbnails" class="thumbnail-item" [class.selected]="selectedThumbnail === thumb"
            (click)="selectThumbnail(thumb)">
            <img [src]="thumb" alt="縮圖預覽" style="width: 160px;">
          </div>
        </div>
        <div class="mt-3">
          <button class="btn btn-primary" [disabled]="!selectedThumbnail" (click)="saveThumbnail()">
            確認使用此縮圖
          </button>
        </div>
      </div>

      <!-- 表單 -->
      <div class="row g-4">

        <!-- 標題 -->
        <div class="col-12">
          <label class="form-label fw-semibold">影片標題 *</label>
          <input type="text" class="form-control" maxlength="100" placeholder="輸入吸引人的標題">
        </div>

        <!-- 描述 -->
        <div class="col-12">
          <label class="form-label fw-semibold">影片描述</label>
          <textarea class="form-control" rows="4" maxlength="5000" placeholder="描述您的影片內容..."></textarea>
        </div>

        <!-- 隱私設定 -->
        <div class="col-12">
          <label class="form-label fw-semibold">隱私設定 *</label>
          <div class="row g-3">

            <div class="col-md-4">
              <label class="card h-100 border-primary">
                <div class="card-body text-center">
                  <input type="radio" name="privacy" value="public" checked class="d-none">
                  <i class="ti ti-world fs-2 text-primary mb-2"></i>
                  <div class="fw-bold">公開</div>
                  <small class="text-muted">所有人都可以觀看</small>
                </div>
              </label>
            </div>

            <div class="col-md-4">
              <label class="card h-100">
                <div class="card-body text-center">
                  <input type="radio" name="privacy" value="unlisted" class="d-none">
                  <i class="ti ti-link fs-2 mb-2"></i>
                  <div class="fw-bold">不公開列出</div>
                  <small class="text-muted">有連結的人可觀看</small>
                </div>
              </label>
            </div>

            <div class="col-md-4">
              <label class="card h-100">
                <div class="card-body text-center">
                  <input type="radio" name="privacy" value="private" class="d-none">
                  <i class="ti ti-lock fs-2 mb-2"></i>
                  <div class="fw-bold">私人</div>
                  <small class="text-muted">僅自己可觀看</small>
                </div>
              </label>
            </div>

          </div>
        </div>

      </div> <!-- row -->
    </div> <!-- card-body -->
  </div> <!-- card -->
</div> <!-- container -->