<!-- 輪播圖 -->
<div id="carousel-sample" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button *ngFor="let image of carouselImages; let i = index" type="button" data-bs-target="#carousel-sample"
      [attr.data-bs-slide-to]="i" [class.active]="i === 0" [attr.aria-current]="i === 0 ? 'true' : null"
      [attr.aria-label]="'Slide ' + (i + 1)">
    </button>
  </div>

  <div class="carousel-inner">
    <div *ngFor="let image of carouselImages; let i = index" class="carousel-item" [class.active]="i === 0">
      <img class="d-block w-100" [src]="image.src" [alt]="image.alt" />
    </div>
  </div>

  <button class="carousel-control-prev" type="button" data-bs-target="#carousel-sample" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carousel-sample" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<!-- 分類區 -->
<div class="row">
  <div class="cagetoryname">
    <h2 class="text-center">分類</h2>
  </div>
  <div class="d-flex flex-wrap justify-content-center align-items-stretch">
    <div *ngFor="let category of categories" class="category-item" (click)="onCategoryClick(category)">
      <div class="card d-flex flex-column mt-3 pt-2">
        <div class="img-responsive img-responsive-21x15 card-img-top"
          [style.background-image]="'url(' + category.image + ')'">
        </div>
        <div class="card-body">
          <h3 class="card-title text-center">{{ category.name }}</h3>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 熱門推薦 -->
<div class="row">
  <div class="popularname popular-header d-flex align-items-center justify-content-between">
    <h2 class="mb-0">熱門推薦</h2>

    <a class="view-all-link" [routerLink]="['/shopping/products']">
      查看所有商品
      <span class="arrow">→</span>
    </a>
  </div>

  <div class="col-lg-2 col-md-3 col-6" *ngFor="let product of popularProducts">
    <div class="card d-flex flex-column mt-6">
      <a [routerLink]="['../product-detail', product.id]">
        <img class="card-img-top" [src]="product.image" [alt]="product.name" />
      </a>
      <div class="card-body d-flex flex-column">
        <h3 class="card-title">
          <a [routerLink]="['../product-detail', product.id]">{{ product.name }}</a>
        </h3>
        <div class="text-secondary">
          {{ product.condition }}
        </div>
        <div class="d-flex align-items-center pt-4 mt-auto">
          <span class="avatar" [style.background-image]="'url(' + product.avatar + ')'"></span>
          <div class="ms-3">
            <a (click)="$event.preventDefault()" class="text-body" style="cursor: pointer;">{{ product.seller }}</a>
          </div>
          <div class="ms-auto">
            <!-- <a href="javascript:void(0)" class="icon d-none d-md-inline-block ms-3 similar-fav-btn"
              [class.favorited]="product.isFavorite" (click)="toggleSimilarFavorite(product)">

              <svg *ngIf="product.isFavorite" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" class="icon text-danger icon-tabler-heart-filled">
                <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
              </svg>

              <svg *ngIf="!product.isFavorite" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" class="icon icon-tabler-heart">
                <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
              </svg>
            </a> -->
            <app-favorite-button [isFavorite]="product.isFavorite" [itemName]="product.name"
              (favoriteChange)="product.isFavorite = $event">
            </app-favorite-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 近期瀏覽 -->
<div class="row">
  <div class="recently-viewed">
    <h2 class="text-center">近期瀏覽</h2>
    <a class="view-all-link" [routerLink]="['/products']">
      查看所有商品
      <span class="arrow">→</span>
    </a>
  </div>

  <div class="col-lg-2 col-md-3 col-6" *ngFor="let product of recentlyViewed">
    <div class="card d-flex flex-column mt-6">
      <a [routerLink]="['../product-detail', product.id]">
        <img class="card-img-top" [src]="product.image" [alt]="product.name" />
      </a>
      <div class="card-body d-flex flex-column">
        <h3 class="card-title">
          <a [routerLink]="['../product-detail', product.id]">{{ product.name }}</a>
        </h3>
        <div class="text-secondary">
          {{ product.condition }}
        </div>
        <div class="d-flex align-items-center pt-4 mt-auto">
          <span class="avatar" [style.background-image]="'url(' + product.avatar + ')'"></span>
          <div class="ms-3">
            <a (click)="$event.preventDefault()" class="text-body" style="cursor: pointer;">{{ product.seller }}</a>
          </div>
          <div class="ms-auto">
            <!-- <a href="javascript:void(0)" class="icon d-none d-md-inline-block ms-3 similar-fav-btn"
              [class.favorited]="product.isFavorite" (click)="toggleSimilarFavorite(product)">

              <svg *ngIf="product.isFavorite" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" class="icon test-danger icon-tabler-heart-filled">
                <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
              </svg>

              <svg *ngIf="!product.isFavorite" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" class="icon icon-tabler-heart">
                <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
              </svg>
            </a> -->
            <app-favorite-button [isFavorite]="product.isFavorite" [itemName]="product.name"
              (favoriteChange)="product.isFavorite = $event">
            </app-favorite-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- <div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 2000">
  <div class="toast align-items-center text-white bg-dark border-0" [class.show]="showToast" role="alert"
    aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        <i class="bi bi-info-circle me-2"></i> {{ toastMessage }}
      </div>
    </div>
  </div>
</div> -->

<div>
  <app-toast-notification></app-toast-notification>
</div>

<div>
  <app-shopping-header></app-shopping-header>
</div>

<div>
  <app-footer></app-footer>
</div>