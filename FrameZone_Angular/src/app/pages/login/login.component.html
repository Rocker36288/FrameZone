<div class="text-center mb-4">
  <!-- BEGIN NAVBAR LOGO -->
  <a routerLink="/" class="navbar-brand navbar-brand-autodark d-inline-flex align-items-center gap-2">
    <div class="logo-image">
      <img src="favicon2.png" alt="FrameZone Logo">
    </div>
    <h2 class="mb-0 fw-bold">{{ logoName }}</h2>
  </a>
  <!-- END NAVBAR LOGO -->
</div>

<div class="card card-md">
  <div class="card-body">
    <h2 class="h2 text-center mb-4">{{ titleName }}</h2>

    <!-- 登入表單 -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" autocomplete="off">
      <!-- 帳號或Email -->
      <div class="mb-3">
        <label for="accountOrEmail" class="form-label">帳號或Email</label>
        <input type="text" id="accountOrEmail" formControlName="accountOrEmail" class="form-control"
          [class.is-invalid]="hasError('accountOrEmail')" placeholder="請輸入帳號或Email" autocomplete="username">
        @if(hasError('accountOrEmail')) {
        <div class="invalid-feedback">
          {{ getErrorMessage('accountOrEmail') }}
        </div>
        }
      </div>

      <!-- 密碼 -->
      <div class="mb-3">
        <label for="passwordInput" class="form-label">密碼</label>
        <div class="input-group input-group-flat">
          <input type="password" id="passwordInput" formControlName="password" class="form-control"
            [class.is-invalid]="hasError('password')" placeholder="請輸入密碼" autocomplete="current-password">
          <span class="input-group-text">
            <a href="javascript:void(0)" class="link-secondary" (click)="togglePassword()"
              [attr.title]="showPassword ? '隱藏密碼' : '顯示密碼'">
              @if(!showPassword) {
              <!-- 眼睛圖示 (顯示密碼) -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M10.585 10.587a2 2 0 0 0 2.829 2.828"></path>
                <path
                  d="M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87">
                </path>
                <path d="M3 3l18 18"></path>
              </svg>
              } @else {

              <!-- 眼睛關閉圖示 (隱藏密碼) -->
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"></path>
                <path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"></path>
              </svg>
              }
            </a>
          </span>
        </div>
        @if(hasError('password')) {
        <div class="invalid-feedback d-block">
          {{ getErrorMessage('password') }}
        </div>
        }
      </div>

      <div class="mb-2 text-end">
        <a routerLink="/forgot-password" class="link-primary small">忘記密碼？</a>
      </div>

      <!-- 記住我 -->
      <div class="mb-2">
        <label class="form-check">
          <input type="checkbox" formControlName="rememberMe" class="form-check-input">
          <span class="form-check-label">在此裝置上記住我</span>
        </label>
      </div>

      <!-- 提交按鈕 -->
      <div class="form-footer">
        <button class="btn btn-primary w-100" type="submit" [disabled]="isSubmitting">
          @if(isSubmitting) {
          <span class="spinner-border spinner-border-sm me-2" role="status"></span>
          登入中...
          } @else {
          登入
          }
        </button>
      </div>
    </form>
  </div>

  <div class="hr-text">或</div>

  <div class="card-body">
    <div class="row">
      <div class="col">
        <!-- Google 登入按鈕容器 - 確保完全獨立 -->
        <div id="googleSignInButton" class="google-signin-wrapper"></div>
      </div>
    </div>
  </div>
</div>

<!-- 註冊連結 -->
<div class="text-center text-secondary mt-3">
  還沒有帳號? <a routerLink="/register" class="link-primary">立即註冊</a>
</div>
