@if(successMessage) {
<div class="alert alert-success alert-dismissible" role="alert">
  <div class="d-flex">
    <div>
      <!-- 成功圖示 -->
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon alert-icon">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M5 12l5 5l10 -10"></path>
      </svg>
    </div>
    <div>{{ successMessage }}</div>
  </div>
  <button type="button" class="btn-close" (click)="dismissSuccessMessage()" aria-label="Close"></button>
</div>
}

<div class="card card-md">
  <div class="card-body">
    <h2 class="h2 text-center mb-4">忘記密碼</h2>
    <p class="text-secondary mb-4 text-center">
      請輸入您註冊時使用的 Email，我們將發送重設密碼連結到您的信箱。
    </p>

    @if(errorMessage) {
    <div class="alert alert-danger alert-dismissible" role="alert">
      <div class="d-flex">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            class="icon alert-icon">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
            <path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"></path>
            <path d="M12 8v4"></path>
            <path d="M12 16h.01"></path>
          </svg>
        </div>
        <div>{{ errorMessage }}</div>
      </div>
      <button type="button" class="btn-close" (click)="dismissErrorMessage()" aria-label="Close"></button>
    </div>
    }

    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" autocomplete="off">
      <div class="mb-3">
        <label for="emailInput" class="form-label">Email</label>
        <input type="email" , id="emailInput" , formControlName="email" , class="form-control" ,
          [class.is-invalid]="hasError('email')" , placeholder="請輸入您的 Email" autocomplete="email">
        @if(hasError('email')) {
        <div class="invalid-feedback">
          {{ getErrorMessage('Email') }}
        </div>
        }
      </div>

      <div class="form-footer">
        <button class="btn btn-primary w-100" type="submit" [disabled]="isSubmitting">
          @if(isSubmitting) {
          <span class="spinner-border spinner-border-sm me-2" role="status"></span>
          發送中...
          } @else {
          發送重設連結
          }
        </button>
      </div>

    </form>
  </div>
</div>

<div class="text-center text-secondary mt-3">
  記得密碼了？ <a routerLink="/login" class="link-primary">返回登入</a>
</div>