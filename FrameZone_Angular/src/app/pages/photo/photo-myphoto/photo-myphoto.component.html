<div class="container-xl photo-page-shell">
  <div class="photo-page-layout" [class.edit-mode]="isEditMode()">

    <!-- Sidebarï¼ˆæŠŠ open ç‹€æ…‹å‚³å…¥ï¼‰ -->
    <app-photo-sidebar [class.sidebar-open]="isSidebarOpen()" (openChange)="isSidebarOpen.set($event)"
      (tagSelectionChange)="onTagSelectionChange($event)" class="photo-sidebar-wrapper">
    </app-photo-sidebar>

    <!-- æ‰‹æ©Ÿ sidebar èƒŒæ™¯é®ç½© -->
    @if (isSidebarOpen()) {
    <div class="sidebar-backdrop" (click)="toggleSidebar()"></div>
    }

    <div class="photo-main-content">
      <!-- Header -->
      <div class="page-header d-print-none">
        <div class="row g-2 align-items-center">
          <div class="col">
            <button class="btn btn-outline-primary d-lg-none me-2" (click)="toggleSidebar()" title="é–‹å•Ÿç¯©é¸">
              <i class="ti ti-filter"></i>
            </button>

            <h2 class="page-title d-inline-block">
              <i class="ti ti-photo me-2"></i>
              æˆ‘çš„ç…§ç‰‡
            </h2>

            @if (hasFilter()) {
            <span class="badge bg-primary-lt ms-2">
              <i class="ti ti-filter-filled me-1"></i>
              å·²ç¯©é¸ {{ filterTagIds().length }} å€‹æ¨™ç±¤
            </span>
            }

            <div class="text-secondary mt-1">
              @if (hasFilter()) {
              <span>ç¬¦åˆç¯©é¸æ¢ä»¶çš„ç…§ç‰‡</span>
              <button class="btn btn-sm btn-link text-danger p-0 ms-2" (click)="clearFilter()">
                <i class="ti ti-x"></i>
                æ¸…é™¤ç¯©é¸
              </button>
              } @else {
              <span>ç®¡ç†æ‚¨ä¸Šå‚³çš„æ‰€æœ‰ç…§ç‰‡</span>
              }
            </div>
          </div>

          <!-- å³å´ï¼šç·¨è¼¯ + ä¸Šå‚³ -->
          <div class="col-auto ms-auto">
            <div class="btn-list">
              <button type="button" class="btn" [class.btn-outline-primary]="!isEditMode()"
                [class.btn-primary]="isEditMode()" (click)="toggleEditMode()">
                <i class="ti" [class.ti-edit]="!isEditMode()" [class.ti-check]="isEditMode()"></i>
                {{ isEditMode() ? 'å®Œæˆç·¨è¼¯' : 'ç·¨è¼¯' }}
              </button>

              <a routerLink="/photo-classify" class="btn btn-primary">
                <i class="ti ti-upload me-2"></i>
                ä¸Šå‚³ç…§ç‰‡
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="page-body">

        <!-- å·¥å…·åˆ—ï¼šåªåœ¨ç·¨è¼¯æ¨¡å¼é¡¯ç¤º -->
        @if (isEditMode() && photos() && hasPhotos()) {
        <div class="card mb-3">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-auto">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" [checked]="allSelected()" (change)="toggleSelectAll()"
                    id="selectAll">
                  <label class="form-check-label" for="selectAll">
                    @if (selectedCount() > 0) {
                    <span class="text-primary">å·²é¸å– {{ selectedCount() }} å¼µç…§ç‰‡</span>
                    } @else {
                    <span>å…¨é¸</span>
                    }
                  </label>
                </div>
              </div>

              @if (selectedCount() > 0) {
              <div class="col-auto">
                <!-- ğŸ†• æ‰¹æ¬¡æ·»åŠ æ¨™ç±¤æŒ‰éˆ• -->
                <button class="btn btn-primary btn-sm me-2" (click)="openBatchAddTagsDialog()">
                  <i class="ti ti-tag me-2"></i>
                  æ·»åŠ æ¨™ç±¤ ({{ selectedCount() }})
                </button>

                <!-- ğŸ†• AI æ‰¹æ¬¡åˆ†ææŒ‰éˆ• -->
                <button class="btn btn-success btn-sm me-2" [disabled]="isAnalyzing()"
                  (click)="batchAnalyzeSelectedPhotos()">
                  <i class="ti ti-brain me-2"></i>
                  @if (isAnalyzing()) {
                  <span class="spinner-border spinner-border-sm me-1"></span>
                  åˆ†æä¸­...
                  } @else {
                  AI åˆ†æ ({{ selectedCount() }})
                  }
                </button>

                <!-- åŸæœ‰ï¼šåˆªé™¤é¸å–æŒ‰éˆ• -->
                <button class="btn btn-danger btn-sm" (click)="deleteSelectedPhotos()">
                  <i class="ti ti-trash me-2"></i>
                  åˆªé™¤é¸å– ({{ selectedCount() }})
                </button>
              </div>
              }

              <div class="col-auto ms-auto">
                <div class="btn-group" role="group">
                  <button type="button" class="btn btn-sm" [class.btn-primary]="viewMode() === 'grid'"
                    [class.btn-outline-primary]="viewMode() !== 'grid'" (click)="viewMode.set('grid')" title="ç¶²æ ¼æª¢è¦–">
                    <i class="ti ti-layout-grid"></i>
                  </button>
                  <button type="button" class="btn btn-sm" [class.btn-primary]="viewMode() === 'list'"
                    [class.btn-outline-primary]="viewMode() !== 'list'" (click)="viewMode.set('list')" title="åˆ—è¡¨æª¢è¦–">
                    <i class="ti ti-list"></i>
                  </button>
                </div>
              </div>

              <div class="col-auto">
                <div class="text-secondary">å…± {{ totalCount() }} å¼µç…§ç‰‡</div>
              </div>
            </div>
          </div>
        </div>
        }

        <!-- Loading -->
        @if (isLoading()) {
        <div class="card">
          <div class="card-body text-center py-5">
            <div class="spinner-border text-primary mb-3" role="status">
              <span class="visually-hidden">è¼‰å…¥ä¸­...</span>
            </div>
            <div class="text-secondary">è¼‰å…¥ç…§ç‰‡ä¸­...</div>
          </div>
        </div>
        }

        <!-- Grid -->
        @if (!isLoading() && hasPhotos() && viewMode() === 'grid') {
        <div class="photo-grid">
          @for (photo of photos(); track photo.photoId) {
          <div class="photo-card" [class.selected]="isEditMode() && selectedPhotos().has(photo.photoId)"
            (click)="onPhotoClick(photo)">

            @if (aiAnalysisStatus().get(photo.photoId)?.hasAnalysis) {
            <span class="badge bg-success position-absolute ai-status-badge">
              <i class="ti ti-check me-1"></i>
              å·²åˆ†æ
            </span>
            }

            <!-- ç·¨è¼¯æ¨¡å¼æ‰é¡¯ç¤ºå‹¾é¸ -->
            @if (isEditMode()) {
            <div class="photo-checkbox">
              <input type="checkbox" class="form-check-input" [checked]="selectedPhotos().has(photo.photoId)"
                (click)="$event.stopPropagation()" (change)="togglePhotoSelection(photo.photoId)">
            </div>

            <div class="photo-actions">
              <!-- ğŸ†• AI æ“ä½œæŒ‰éˆ• -->
              @if (!aiAnalysisStatus().get(photo.photoId)?.hasAnalysis) {
              <!-- æœªåˆ†æï¼šé¡¯ç¤ºåˆ†ææŒ‰éˆ• -->
              <button class="btn btn-sm btn-primary me-1" [disabled]="isAnalyzing()"
                (click)="analyzePhoto(photo.photoId, $event)" title="AI åˆ†æ">
                <i class="ti ti-brain"></i>
              </button>
              } @else {
              <!-- å·²åˆ†æï¼šé¡¯ç¤ºæŸ¥çœ‹å»ºè­°æŒ‰éˆ• -->
              <button class="btn btn-sm btn-info me-1" (click)="viewAISuggestions(photo.photoId, $event)"
                title="æŸ¥çœ‹ AI å»ºè­°">
                <i class="ti ti-tag me-1"></i>
                {{ aiAnalysisStatus().get(photo.photoId)?.pendingCount || 0 }}
              </button>
              }

              <!-- åˆªé™¤æŒ‰éˆ• -->
              <button class="btn btn-sm btn-ghost-danger" (click)="deletePhoto(photo.photoId, $event)" title="åˆªé™¤">
                <i class="ti ti-trash"></i>
              </button>
            </div>
            }

            <div class="photo-thumbnail">
              <img [src]="getThumbnailUrl(photo)" [alt]="photo.fileName" loading="lazy">
            </div>

            <div class="photo-info">
              <div class="photo-filename" [title]="photo.fileName">{{ photo.fileName }}</div>
              <div class="photo-meta">
                <span class="meta-item">
                  <i class="ti ti-calendar"></i>
                  {{ formatDate(photo.dateTaken || photo.uploadedAt) }}
                </span>
              </div>

              @if (photo.tags && photo.tags.length > 0) {
              <div class="photo-tags">
                @for (tag of photo.tags.slice(0, 3); track tag) {
                <span class="badge bg-blue-lt">{{ tag }}</span>
                }
                @if (photo.tags.length > 3) {
                <span class="badge bg-secondary-lt">+{{ photo.tags.length - 3 }}</span>
                }
              </div>
              }
            </div>
          </div>
          }
        </div>
        }

        <!-- List -->
        @if (!isLoading() && hasPhotos() && viewMode() === 'list') {
        <div class="card">
          <div class="table-responsive">
            <table class="table table-vcenter card-table">
              <thead>
                <tr>
                  @if (isEditMode()) { <th class="w-1"></th> }
                  <th>ç…§ç‰‡</th>
                  <th>æª”æ¡ˆåç¨±</th>
                  <th>æ‹æ”æ™‚é–“</th>
                  <th>æ¨™ç±¤</th>
                  <th>AI ç‹€æ…‹</th>
                  @if (isEditMode()) { <th class="w-1"></th> }
                </tr>
              </thead>

              <tbody>
                @for (photo of photos(); track photo.photoId) {
                <tr class="photo-row" [class.table-active]="isEditMode() && selectedPhotos().has(photo.photoId)"
                  (click)="onPhotoClick(photo)">

                  @if (isEditMode()) {
                  <td (click)="$event.stopPropagation()">
                    <input type="checkbox" class="form-check-input" [checked]="selectedPhotos().has(photo.photoId)"
                      (change)="togglePhotoSelection(photo.photoId)">
                  </td>
                  }

                  <td>
                    <div class="list-thumbnail">
                      <img [src]="getThumbnailUrl(photo)" [alt]="photo.fileName">
                    </div>
                  </td>
                  <td>
                    <div class="text-truncate" style="max-width: 300px;" [title]="photo.fileName">
                      {{ photo.fileName }}
                    </div>
                  </td>
                  <td>
                    <span class="text-secondary">{{ formatDate(photo.dateTaken || photo.uploadedAt) }}</span>
                  </td>
                  <td>
                    @if (photo.tags && photo.tags.length > 0) {
                    <div class="d-flex flex-wrap gap-1">
                      @for (tag of photo.tags.slice(0, 5); track tag) {
                      <span class="badge bg-blue-lt">{{ tag }}</span>
                      }
                      @if (photo.tags.length > 5) {
                      <span class="badge bg-secondary-lt">+{{ photo.tags.length - 5 }}</span>
                      }
                    </div>
                    } @else {
                    <span class="text-secondary">-</span>
                    }
                  </td>

                  <!-- ğŸ†• AI ç‹€æ…‹åˆ— -->
                  <td (click)="$event.stopPropagation()">
                    @if (aiAnalysisStatus().get(photo.photoId)?.hasAnalysis) {
                    <button class="btn btn-sm btn-info" (click)="viewAISuggestions(photo.photoId, $event)">
                      <i class="ti ti-tag me-1"></i>
                      {{ aiAnalysisStatus().get(photo.photoId)?.pendingCount || 0 }} å€‹å»ºè­°
                    </button>
                    } @else {
                    <button class="btn btn-sm btn-outline-primary" [disabled]="isAnalyzing()"
                      (click)="analyzePhoto(photo.photoId, $event)">
                      <i class="ti ti-brain me-1"></i>
                      åˆ†æ
                    </button>
                    }
                  </td>

                  @if (isEditMode()) {
                  <td (click)="$event.stopPropagation()">
                    <button class="btn btn-sm btn-ghost-danger" (click)="deletePhoto(photo.photoId, $event)" title="åˆªé™¤">
                      <i class="ti ti-trash"></i>
                    </button>
                  </td>
                  }
                </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
        }

        <!-- Pagination -->
        @if (!isLoading() && hasPhotos() && totalPages() > 1) {
        <div class="card mt-3">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <button class="btn btn-outline-primary" [disabled]="currentPage() === 1" (click)="previousPage()">
                <i class="ti ti-chevron-left me-2"></i>
                ä¸Šä¸€é 
              </button>

              <ul class="pagination pagination-sm m-0">
                @if (getPageRange()[0] > 1) {
                <li class="page-item"><a class="page-link" (click)="goToPage(1)">1</a></li>
                @if (getPageRange()[0] > 2) {
                <li class="page-item disabled"><span class="page-link">...</span></li>
                }
                }

                @for (page of getPageRange(); track page) {
                <li class="page-item" [class.active]="page === currentPage()">
                  <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
                </li>
                }

                @if (getPageRange()[getPageRange().length - 1] < totalPages()) { @if
                  (getPageRange()[getPageRange().length - 1] < totalPages() - 1) { <li class="page-item disabled"><span
                    class="page-link">...</span></li>
                  }
                  <li class="page-item"><a class="page-link" (click)="goToPage(totalPages())">{{ totalPages() }}</a>
                  </li>
                  }
              </ul>

              <button class="btn btn-outline-primary" [disabled]="currentPage() === totalPages()" (click)="nextPage()">
                ä¸‹ä¸€é  <i class="ti ti-chevron-right ms-2"></i>
              </button>
            </div>
          </div>
        </div>
        }

        <!-- Empty -->
        @if (!isLoading() && !hasPhotos()) {
        <div class="empty">
          <div class="empty-img">
            <img src="https://tabler.io/static/illustrations/undraw_photo_album_re_bhes.svg" height="128" alt="">
          </div>
          @if (hasFilter()) {
          <p class="empty-title">æ‰¾ä¸åˆ°ç¬¦åˆæ¢ä»¶çš„ç…§ç‰‡</p>
          <p class="empty-subtitle text-secondary">è«‹å˜—è©¦èª¿æ•´ç¯©é¸æ¢ä»¶</p>
          <div class="empty-action">
            <button class="btn btn-primary" (click)="clearFilter()">
              <i class="ti ti-x me-2"></i>æ¸…é™¤ç¯©é¸
            </button>
          </div>
          } @else {
          <p class="empty-title">é‚„æ²’æœ‰ç…§ç‰‡</p>
          <p class="empty-subtitle text-secondary">é–‹å§‹ä¸Šå‚³æ‚¨çš„ç¬¬ä¸€å¼µç…§ç‰‡å§ï¼</p>
          <div class="empty-action">
            <a routerLink="/photo-classify" class="btn btn-primary">
              <i class="ti ti-upload me-2"></i>ä¸Šå‚³ç…§ç‰‡
            </a>
          </div>
          }
        </div>
        }

      </div>
    </div>

    <!-- è©³ç´°è³‡è¨Š Modalï¼ˆéç·¨è¼¯æ¨¡å¼ä¸‹é»ç…§ç‰‡é–‹ï¼‰ -->
    @if (activePhoto()) {
    <div class="photo-detail-backdrop" (click)="closePhotoDetail()"></div>

    <div class="photo-detail-modal" role="dialog" aria-modal="true" (click)="$event.stopPropagation()">
      <div class="photo-detail-header">
        <div class="title">
          <i class="ti ti-photo"></i>
          <span class="text-truncate">{{ activePhoto()!.fileName }}</span>
        </div>

        <button class="btn btn-sm btn-ghost-secondary" (click)="closePhotoDetail()" title="é—œé–‰">
          <i class="ti ti-x"></i>
        </button>
      </div>

      <div class="photo-detail-body">
        <div class="detail-image">
          <img [src]="getThumbnailUrl(activePhoto()!)" [alt]="activePhoto()!.fileName">
        </div>

        <div class="detail-info">
          <div class="info-row">
            <span class="label">æª”å</span>
            <span class="value">{{ activePhoto()!.fileName }}</span>
          </div>

          <div class="info-row">
            <span class="label">æ™‚é–“</span>
            <span class="value">{{ formatDate(activePhoto()!.dateTaken || activePhoto()!.uploadedAt) }}</span>
          </div>

          <div class="info-row">
            <span class="label">æ¨™ç±¤</span>
            <span class="value">
              @if (activePhoto()!.tags?.length) {
              <span class="d-flex flex-wrap gap-1">
                @for (tag of activePhoto()!.tags; track tag) {
                <span class="badge bg-blue-lt">{{ tag }}</span>
                }
              </span>
              } @else {
              <span class="text-secondary">-</span>
              }
            </span>
          </div>

          <!-- ğŸ†• AI åˆ†æç‹€æ…‹ -->
          @if (aiAnalysisStatus().get(activePhoto()!.photoId)) {
          <div class="info-row">
            <span class="label">AI åˆ†æ</span>
            <span class="value">
              @if (aiAnalysisStatus().get(activePhoto()!.photoId)?.hasAnalysis) {
              <span class="badge bg-success me-2">å·²åˆ†æ</span>
              @if (aiAnalysisStatus().get(activePhoto()!.photoId)?.pendingCount! > 0) {
              <button class="btn btn-sm btn-info" (click)="viewAISuggestions(activePhoto()!.photoId, $event)">
                æŸ¥çœ‹ {{ aiAnalysisStatus().get(activePhoto()!.photoId)?.pendingCount }} å€‹å»ºè­°
              </button>
              }
              } @else {
              <button class="btn btn-sm btn-primary" [disabled]="isAnalyzing()"
                (click)="analyzePhoto(activePhoto()!.photoId, $event)">
                <i class="ti ti-brain me-1"></i>
                AI åˆ†æ
              </button>
              }
            </span>
          </div>
          }

        </div>
      </div>

      <div class="photo-detail-footer">
        <button class="btn btn-outline-primary" (click)="toggleEditMode(); closePhotoDetail()">
          <i class="ti ti-edit me-2"></i>é€²å…¥ç·¨è¼¯
        </button>

        <button class="btn btn-danger" (click)="deletePhoto(activePhoto()!.photoId, $event)">
          <i class="ti ti-trash me-2"></i>åˆªé™¤
        </button>
      </div>
    </div>
    }



  </div>
  <!-- ğŸ†• æ‰¹æ¬¡æ·»åŠ æ¨™ç±¤å°è©±æ¡† -->

  @if (isBatchAddTagsDialogOpen()) {
  <app-batch-add-tags-dialog [selectedPhotoCount]="selectedCount()" (confirm)="handleBatchAddTags($event)"
    (cancel)="closeBatchAddTagsDialog()">
  </app-batch-add-tags-dialog>
  }

  <!-- ğŸ†• AI å»ºè­°é¢æ¿ -->
  @if (showAISuggestionsPanel()) {
  <div class="ai-suggestions-panel">
    <!-- èƒŒæ™¯é®ç½© -->
    <div class="panel-backdrop" (click)="closeAISuggestionsPanel()"></div>

    <!-- é¢æ¿å…§å®¹ -->
    <div class="panel-content">
      <!-- æ¨™é¡Œåˆ— -->
      <div class="panel-header">
        <h3>
          <i class="ti ti-brain me-2"></i>
          AI æ¨™ç±¤å»ºè­°
        </h3>
        <button type="button" class="btn-close" (click)="closeAISuggestionsPanel()">
        </button>
      </div>

      <!-- ä¸»é«”å…§å®¹ -->
      <div class="panel-body">
        <!-- ä¿¡å¿ƒåˆ†æ•¸éæ¿¾ -->
        <div class="mb-3">
          <label class="form-label">
            ä¿¡å¿ƒåˆ†æ•¸éæ¿¾ï¼š<strong>{{ (minConfidenceFilter() * 100).toFixed(0) }}%</strong>
          </label>
          <input type="range" class="form-range" min="0" max="1" step="0.05" [value]="minConfidenceFilter()"
            (input)="adjustConfidenceFilter(+$any($event.target).value)">
          <div class="d-flex justify-content-between text-muted small">
            <span>0%</span>
            <span>50%</span>
            <span>100%</span>
          </div>
        </div>

        <!-- å¿«é€Ÿæ“ä½œ -->
        <div class="mb-3">
          <button class="btn btn-success w-100 mb-2" [disabled]="filteredAISuggestions().length === 0"
            (click)="applyHighConfidenceSuggestions()">
            <i class="ti ti-wand me-1"></i>
            è‡ªå‹•å¥—ç”¨é«˜ä¿¡å¿ƒå»ºè­° (â‰¥85%)
          </button>

          <button class="btn btn-primary w-100" [disabled]="filteredAISuggestions().length === 0"
            (click)="applyAllVisibleSuggestions()">
            <i class="ti ti-check me-1"></i>
            å¥—ç”¨æ‰€æœ‰é¡¯ç¤ºçš„å»ºè­° ({{ filteredAISuggestions().length }})
          </button>
        </div>

        <hr>

        <!-- çµ±è¨ˆè³‡è¨Š -->
        <div class="alert alert-info mb-3">
          <div class="d-flex align-items-center">
            <i class="ti ti-info-circle me-2"></i>
            <div class="flex-grow-1">
              å…±æœ‰ <strong>{{ aiSuggestions().length }}</strong> å€‹å»ºè­°ï¼Œ
              é¡¯ç¤º <strong>{{ filteredAISuggestions().length }}</strong> å€‹
              ï¼ˆä¿¡å¿ƒåˆ†æ•¸ â‰¥ {{ (minConfidenceFilter() * 100).toFixed(0) }}%ï¼‰
            </div>
          </div>
        </div>

        <!-- å»ºè­°åˆ—è¡¨ -->
        @if (filteredAISuggestions().length > 0) {
        <div class="suggestion-list">
          @for (suggestion of filteredAISuggestions(); track suggestion.suggestionId) {
          <div class="suggestion-item" [class.selected]="selectedAISuggestions().has(suggestion.suggestionId)">
            <!-- å‹¾é¸æ¡† -->
            <div class="form-check">
              <input class="form-check-input" type="checkbox"
                [checked]="selectedAISuggestions().has(suggestion.suggestionId)"
                (change)="toggleAISuggestionSelection(suggestion.suggestionId)"
                [id]="'suggestion-' + suggestion.suggestionId">

              <label class="form-check-label flex-grow-1" [for]="'suggestion-' + suggestion.suggestionId">
                <div class="d-flex align-items-center justify-content-between mb-2">
                  <div class="flex-grow-1">
                    <div class="fw-bold">{{ suggestion.tagName }}</div>
                    @if (suggestion.categoryName) {
                    <small class="text-muted">
                      åˆ†é¡ï¼š{{ suggestion.categoryName }}
                    </small>
                    }
                  </div>

                  <div class="ms-2">
                    <!-- ä¾†æºæ¨™è¨˜ -->
                    <span class="badge bg-{{ photoService.getSourceBadgeColor(suggestion.source) }} me-1">
                      {{ suggestion.source }}
                    </span>
                    <!-- ä¿¡å¿ƒåˆ†æ•¸ -->
                    <span class="badge bg-{{ photoService.getConfidenceColor(suggestion.confidence) }}">
                      {{ (suggestion.confidence * 100).toFixed(0) }}%
                    </span>
                  </div>
                </div>

                <!-- é€²åº¦æ¢ -->
                <div class="progress" style="height: 4px;">
                  <div class="progress-bar bg-{{ photoService.getConfidenceColor(suggestion.confidence) }}"
                    [style.width.%]="suggestion.confidence * 100">
                  </div>
                </div>
              </label>
            </div>
          </div>
          }
        </div>
        } @else {
        <div class="text-center text-muted py-4">
          <i class="ti ti-inbox display-6"></i>
          <p class="mt-2">æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„å»ºè­°</p>
          <small>å˜—è©¦èª¿æ•´ä¿¡å¿ƒåˆ†æ•¸éæ¿¾</small>
        </div>
        }
      </div>

      <!-- åº•éƒ¨æ“ä½œ -->
      <div class="panel-footer">
        <button class="btn btn-primary w-100" [disabled]="selectedAISuggestionsCount() === 0"
          (click)="applySelectedAISuggestions()">
          <i class="ti ti-check me-1"></i>
          å¥—ç”¨é¸ä¸­çš„å»ºè­° ({{ selectedAISuggestionsCount() }})
        </button>
      </div>
    </div>
  </div>
  }

</div>
