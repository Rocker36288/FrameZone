<!-- 頁面標題區 -->
<section class="pricing-hero">
  <div class="container">
    <div class="hero-content">
      <h1 class="hero-title">選擇最適合您的方案</h1>
      <p class="hero-subtitle">
        靈活的定價方案，滿足個人到企業的各種需求<br>
        所有方案均享 14 天免費試用，隨時可取消
      </p>

      <!-- 計費週期切換 -->
      <div class="billing-toggle">
        <span class="toggle-label" [class.active]="!isYearly()">月付</span>
        <label class="toggle-switch">
          <input type="checkbox" [checked]="isYearly()" (change)="toggleBillingCycle()">
          <span class="toggle-slider"></span>
        </label>
        <span class="toggle-label" [class.active]="isYearly()">年付</span>
        <span class="toggle-badge">省下 2 個月費用</span>
      </div>
    </div>
  </div>
</section>

<!-- 方案卡片區 -->
<section class="pricing-cards">
  <div class="container">
    <div class="pricing-grid">
      <div class="pricing-card"
           *ngFor="let plan of plans"
           [class.featured]="plan.isFeatured">

        <!-- Featured 徽章 -->
        <div class="card-badge" *ngIf="plan.isFeatured">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
          </svg>
          最受歡迎
        </div>

        <!-- 卡片頭部 -->
        <div class="pricing-card-header">
          <h3 class="plan-name">{{ plan.name }}</h3>

          <div class="plan-price">
            <span class="price-currency">NT$</span>
            <span class="price-amount">{{ getMonthlyPrice(plan) }}</span>
            <span class="price-period">/月</span>
          </div>

          <p class="plan-description">{{ plan.description }}</p>

          <div class="price-note" *ngIf="isYearly() && plan.monthlyPrice > 0">
            每年付款 NT${{ getPrice(plan) }}
            <span class="price-savings" *ngIf="getSavings(plan) > 0">
              (省下 NT${{ getSavings(plan) }})
            </span>
          </div>
        </div>

        <!-- 功能列表 -->
        <div class="card-body">
          <ul class="feature-list">
            <li *ngFor="let feature of plan.features" class="feature-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12l5 5l10 -10"></path>
              </svg>
              <span>{{ feature }}</span>
            </li>
          </ul>
        </div>

        <!-- CTA 按鈕 -->
        <div class="card-footer">
          <a [href]="plan.code === 'free' ? '/register' : '/register?plan=' + plan.code"
             class="btn"
             [class.btn-primary]="plan.isFeatured"
             [class.btn-outline]="!plan.isFeatured">
            {{ plan.monthlyPrice === 0 ? '開始使用' : '免費試用 14 天' }}
          </a>
        </div>
      </div>
    </div>

    <!-- 方案說明 -->
    <div class="pricing-note">
      <p>✓ 所有付費方案均享 14 天免費試用</p>
      <p>✓ 隨時可升級或降級方案</p>
      <p>✓ 不滿意可隨時取消，無需額外費用</p>
    </div>
  </div>
</section>

<!-- 詳細功能比較表 -->
<section class="feature-comparison">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">詳細功能比較</h2>
      <p class="section-subtitle">深入了解各方案的完整功能差異</p>
    </div>

    <div class="comparison-table-wrapper">
      <table class="comparison-table">
        <thead>
          <tr>
            <th class="feature-col">功能項目</th>
            <th class="plan-col">免費版</th>
            <th class="plan-col featured-col">基礎版</th>
            <th class="plan-col">進階版</th>
            <th class="plan-col">專業版</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let category of featureComparisons">
            <!-- 分類標題 -->
            <tr class="category-row">
              <td colspan="5" class="category-title">
                <strong>{{ category.category }}</strong>
              </td>
            </tr>

            <!-- 功能項目 -->
            <tr *ngFor="let feature of category.features" class="feature-row">
              <td class="feature-name">{{ feature.name }}</td>
              <td class="plan-value">
                <ng-container *ngIf="feature.free === true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-check">
                    <path d="M5 12l5 5l10 -10"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.free === false">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-cross">
                    <path d="M18 6l-12 12"></path>
                    <path d="M6 6l12 12"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.free !== true && feature.free !== false">
                  {{ feature.free }}
                </ng-container>
              </td>
              <td class="plan-value featured-col">
                <ng-container *ngIf="feature.basic === true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-check">
                    <path d="M5 12l5 5l10 -10"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.basic === false">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-cross">
                    <path d="M18 6l-12 12"></path>
                    <path d="M6 6l12 12"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.basic !== true && feature.basic !== false">
                  {{ feature.basic }}
                </ng-container>
              </td>
              <td class="plan-value">
                <ng-container *ngIf="feature.pro === true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-check">
                    <path d="M5 12l5 5l10 -10"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.pro === false">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-cross">
                    <path d="M18 6l-12 12"></path>
                    <path d="M6 6l12 12"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.pro !== true && feature.pro !== false">
                  {{ feature.pro }}
                </ng-container>
              </td>
              <td class="plan-value">
                <ng-container *ngIf="feature.enterprise === true">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-check">
                    <path d="M5 12l5 5l10 -10"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.enterprise === false">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                       fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                       stroke-linejoin="round" class="icon-cross">
                    <path d="M18 6l-12 12"></path>
                    <path d="M6 6l12 12"></path>
                  </svg>
                </ng-container>
                <ng-container *ngIf="feature.enterprise !== true && feature.enterprise !== false">
                  {{ feature.enterprise }}
                </ng-container>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- FAQ 區塊 -->
<section class="pricing-faq">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">常見問題</h2>
      <p class="section-subtitle">關於方案與計費的疑問解答</p>
    </div>

    <div class="faq-grid">
      <div class="faq-item">
        <h3 class="faq-question">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          如何升級或降級方案？
        </h3>
        <p class="faq-answer">
          您可以隨時在帳戶設定中升級或降級方案。升級立即生效，差價將按比例計算；降級將在當前計費週期結束後生效。
        </p>
      </div>

      <div class="faq-item">
        <h3 class="faq-question">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          免費試用期間需要信用卡嗎？
        </h3>
        <p class="faq-answer">
          是的，我們需要信用卡資訊來啟動 14 天免費試用。試用期間不會收費，您可以在試用結束前隨時取消，不會產生任何費用。
        </p>
      </div>

      <div class="faq-item">
        <h3 class="faq-question">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          年付方案可以獲得發票嗎？
        </h3>
        <p class="faq-answer">
          可以。所有付費方案都會自動開立電子發票，您可以在帳戶設定中下載或列印發票。企業用戶也可以設定統一編號。
        </p>
      </div>

      <div class="faq-item">
        <h3 class="faq-question">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          超過儲存空間限制會怎樣？
        </h3>
        <p class="faq-answer">
          當您接近儲存空間限制時，系統會提醒您。超過限制後無法上傳新照片，但現有照片仍可正常存取。您可以升級方案或刪除部分照片來釋放空間。
        </p>
      </div>

      <div class="faq-item">
        <h3 class="faq-question">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          企業版支援客製化需求嗎？
        </h3>
        <p class="faq-answer">
          支援。企業版提供專屬客服經理，可協助您進行系統整合、客製化功能開發等需求。請聯繫我們的業務團隊洽談細節。
        </p>
      </div>

      <div class="faq-item">
        <h3 class="faq-question">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
               fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          取消訂閱後照片會被刪除嗎？
        </h3>
        <p class="faq-answer">
          不會。取消訂閱後，您的照片會保留 30 天。在此期間您可以下載備份或重新訂閱。30 天後，付費功能將無法使用，但免費版額度內的照片仍會保留。
        </p>
      </div>
    </div>
  </div>
</section>

<!-- CTA 區塊 -->
<section class="pricing-cta">
  <div class="container">
    <div class="cta-content">
      <h2 class="cta-title">準備好開始了嗎？</h2>
      <p class="cta-subtitle">立即開始 14 天免費試用，體驗專業照片管理的便利性</p>
      <div class="cta-actions">
        <a href="/register" class="btn btn-primary btn-large">開始免費試用</a>
        <a href="/contact" class="btn btn-outline btn-large">聯繫業務團隊</a>
      </div>
      <p class="cta-note">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12l5 5l10 -10"></path>
        </svg>
        不需要信用卡 · 隨時可取消 · 14 天免費試用
      </p>
    </div>
  </div>
</section>
