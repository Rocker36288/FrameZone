<section>
  <div class="container-fluid bg-light" style="min-height:100vh;">
    <div class="row social-row">
      <div class="col-md-3 col-sm-12 p-2 side-col left-side" [class.drawer-open]="isLeftSidebarOpen">
        <div class="sidebar">
          <app-social-menu (click)="closeLeftSidebar()"></app-social-menu>
        </div>
      </div>

      <div class="col-md-6 col-sm-12 p-2 middle-col">
        <div class="middle">
          <div class="drawer-controls">
            <button class="menu-drawer-toggle" type="button" (click)="toggleLeftSidebar()"
              [attr.aria-pressed]="isLeftSidebarOpen" aria-label="Toggle menu">
              <i class="bi" [ngClass]="isLeftSidebarOpen ? 'bi-x-lg' : 'bi-list'"></i>
            </button>
            <button class="menu-drawer-toggle right-toggle" type="button" (click)="toggleRightSidebar()"
              [attr.aria-pressed]="isRightSidebarOpen" aria-label="Toggle friends">
              <i class="bi" [ngClass]="isRightSidebarOpen ? 'bi-x-lg' : 'bi-people'"></i>
            </button>
          </div>
          <router-outlet></router-outlet>
        </div>
      </div>

      <div class="col-md-3 col-sm-12 p-2 side-col right-side" [class.drawer-open]="isRightSidebarOpen">
        <div class="sidebar">
          <app-social-friends (friendSelected)="onFriendSelected($event)"></app-social-friends>
        </div>
      </div>
    </div>
    @if(showBackToTop){
    <button ngClass="btn-up" id="backToTopBtn" (click)="backToTop()">
      â†‘
    </button>
    }
    <div class="drawer-overlay" [class.show]="isLeftSidebarOpen || isRightSidebarOpen"
      (click)="closeLeftSidebar(); closeRightSidebar()"></div>
  </div>
</section>

<app-social-chat [selectedFriend]="selectedFriend" (closed)="onChatClosed()"></app-social-chat>
